---
layout: default
---

<article class="detail detail--illusion" data-reveal>
  <header class="detail__header">
    <p class="detail__eyebrow">Visual illusion</p>
    <h1 class="detail__title">{{ page.title }}</h1>
    <div class="detail__meta">
      <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%B %Y" }}</time>
      {% if page.difficulty %}
      <span class="chip">{{ page.difficulty }}</span>
      {% endif %}
      {% if page.duration %}
      <span class="detail__meta-item">{{ page.duration }}</span>
      {% endif %}
      {% if page.illusion_type %}
      <span class="detail__meta-item">{{ page.illusion_type }}</span>
      {% endif %}
    </div>
    {% if page.description %}
    <p class="detail__summary">{{ page.description }}</p>
    {% endif %}
  </header>

  {% if page.warning %}
  <div class="notice notice--warning" role="note">
    <strong>Heads up:</strong> {{ page.warning }}
  </div>
  {% endif %}

  {% assign embed_src = page.iframe_src | default: page.iframe_url %}
  {% if embed_src or page.images %}
  <div class="detail__media">
    {% if embed_src %}
    <div class="responsive-frame">
      <iframe src="{{ embed_src | relative_url }}"
              width="{{ page.iframe_width | default: '100%' }}"
              height="{{ page.iframe_height | default: '640' }}"
              loading="lazy"
              class="detail__iframe"
              allowfullscreen></iframe>
    </div>
    {% endif %}

    {% if page.images %}
    <div class="media-grid">
      {% for image in page.images %}
      <figure class="media-grid__item">
        <img src="{{ image.src | relative_url }}" alt="{{ image.alt | default: page.title }}" {% if image.interactive %}data-interactive="true"{% endif %}>
        {% if image.caption %}
        <figcaption>{{ image.caption }}</figcaption>
        {% endif %}
      </figure>
      {% endfor %}
    </div>
    {% endif %}
  </div>
  {% endif %}

  <div class="detail__content prose">
    {{ content }}
  </div>

  {% if page.controls %}
  <section class="detail__section">
    <h2>Interactive controls</h2>
    <div class="control-grid">
      {% for control in page.controls %}
        {% case control.type %}
        {% when 'slider' %}
        <div class="control-group">
          <label for="{{ control.id }}">{{ control.label }}</label>
          <div class="control-group__input">
            <input type="range"
                   id="{{ control.id }}"
                   min="{{ control.min | default: 0 }}"
                   max="{{ control.max | default: 100 }}"
                   value="{{ control.default | default: 50 }}"
                   oninput="{{ control.callback }}(this.value)">
            <span class="control-value" id="{{ control.id }}-value">{{ control.default | default: 50 }}</span>
          </div>
        </div>
        {% when 'button' %}
        <div class="control-group control-group--inline">
          <button class="btn btn-secondary" type="button" onclick="{{ control.callback }}()">{{ control.label }}</button>
        </div>
        {% when 'checkbox' %}
        <div class="control-group">
          <label class="control-checkbox">
            <input type="checkbox"
                   id="{{ control.id }}"
                   {% if control.default %}checked{% endif %}
                   onchange="{{ control.callback }}(this.checked)">
            <span>{{ control.label }}</span>
          </label>
        </div>
        {% endcase %}
      {% endfor %}
    </div>
  </section>
  {% endif %}

  {% if page.explanation %}
  <section class="detail__section">
    <h2>How it works</h2>
    <div class="prose">
      {{ page.explanation }}
    </div>
  </section>
  {% endif %}

  {% if page.tags %}
  <footer class="detail__footer">
    <div class="card__tags">
      {% for tag in page.tags %}
      <span class="tag">{{ tag }}</span>
      {% endfor %}
    </div>
  </footer>
  {% endif %}
</article>
