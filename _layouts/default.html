<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ page.title | default: site.title | default: site.github.repository_name }}</title>
  {% if page.description or site.description %}
  <meta name="description" content="{{ page.description | default: site.description | escape }}">
  {% endif %}

  <!-- Favicon and Touch Icons -->
  <link rel="icon" type="image/x-icon" href="{{ '/favicon.ico' | relative_url }}">
  <link rel="apple-touch-icon" href="{{ '/apple-touch-icon.png' | relative_url }}">
  <link rel="apple-touch-icon-precomposed" href="{{ '/apple-touch-icon-precomposed.png' | relative_url }}">
  <link rel="icon" type="image/svg+xml" href="{{ '/assets/icons/icon-base.svg' | relative_url }}">
  <link rel="manifest" href="{{ '/site.webmanifest' | relative_url }}">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@500;600;700&display=swap">

  <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}" data-root-relative>
  <!--[if lt IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
  <![endif]-->
  {% include head-custom.html %}
</head>
<body class="{{ page.layout }}-page{% if page.url == '/contact/' or page.permalink == '/contact/' %} contact-page{% endif %}">
  <div class="site-wrapper">
    <header class="site-header">
      <div class="container">
        <div class="nav-shell">
          <div class="nav-brand">
            <a href="{{ '/' | relative_url }}" class="brand-link" aria-label="obrien.vision home">
              <span class="brand-word brand-word--primary">obrien</span><span class="brand-dot">.</span><span class="brand-word brand-word--secondary">vision</span>
            </a>
          </div>
          <button class="mobile-menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </button>
          <div class="nav-menu" id="primary-navigation">
            <ul class="nav-links">
              {% assign menu = site.data.navigation.main %}
              {% for item in menu %}
                {% assign normalized_name = item.name | downcase | strip %}
                <li class="nav-item{% if normalized_name == 'contact' %} nav-item--cta{% endif %}">
                  <a href="{{ item.url | relative_url }}"
                     class="nav-link{% if page.url == item.url %} active{% endif %}{% if normalized_name == 'contact' %} nav-link--cta{% endif %}"
                     {% if page.url == item.url %}aria-current="page"{% endif %}>
                    {{ item.name }}
                  </a>
                </li>
              {% endfor %}
              <li class="nav-item nav-item--theme">
                <button id="theme-toggle" class="theme-toggle-nav" aria-label="Toggle theme" type="button">ðŸŒ™</button>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </header>

    <main class="site-main">
      <div class="container content-container">
        {{ content }}
      </div>
    </main>

    <footer class="site-footer">
      <div class="container footer-container">
        <div class="footer-branding">
          <a href="{{ '/' | relative_url }}" class="footer-logo" aria-label="obrien.vision home">
            <span class="brand-word brand-word--primary">obrien</span><span class="brand-dot">.</span><span class="brand-word brand-word--secondary">vision</span>
          </a>
          <p class="footer-tagline">Human perception research meets responsible AI evaluation and storytelling.</p>
          <div class="footer-socials">
            <a href="https://www.linkedin.com/in/justin08rien" class="footer-social" target="_blank" rel="noopener">LinkedIn</a>
            <a href="https://github.com/Justin0Brien" class="footer-social" target="_blank" rel="noopener">GitHub</a>
          </div>
        </div>
        <div class="footer-links">
          <div class="footer-column">
            <h4>Explore</h4>
            <ul class="footer-list">
              {% for item in site.data.navigation.main %}
              <li><a href="{{ item.url | relative_url }}">{{ item.name }}</a></li>
              {% endfor %}
            </ul>
          </div>
          <div class="footer-column">
            <h4>Policies</h4>
            <ul class="footer-list">
              {% assign footer_menu = site.data.navigation.footer | default: site.data.navigation.main %}
              {% for item in footer_menu %}
              <li><a href="{{ item.url | relative_url }}">{{ item.name }}</a></li>
              {% endfor %}
              <li><button class="footer-link" type="button" onclick="window.revisitConsent && window.revisitConsent(); return false;">Cookie settings</button></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="footer-meta">
        <p>&copy; {{ "now" | date: "%Y" }} Justin O'Brien. All rights reserved.</p>
      </div>
    </footer>
  </div>
  <script>
    (function() {
      if (window.location.protocol !== 'file:') return;

      var currentHref = window.location.href;
      var currentDir = currentHref.replace(/[^\/]*$/, '');
      var siteRoot = currentDir;
      var siteIndex = currentDir.indexOf('/_site/');
      if (siteIndex !== -1) {
        siteRoot = currentDir.slice(0, siteIndex + 7);
      }

      function toAssetPath(value) {
        if (!value || value.charAt(0) !== '/' || value.startsWith('//')) return value;
        return siteRoot + value.replace(/^\/+/, '');
      }

      function toPagePath(value) {
        if (!value || value.charAt(0) !== '/' || value.startsWith('//')) return value;
        var page = value.replace(/^\/+/, '');
        if (!page) {
          page = 'index.html';
        } else if (!/\.[\w]+$/.test(page)) {
          if (!page.endsWith('/')) page += '/';
          page += 'index.html';
        }
        return siteRoot + page;
      }

      document.querySelectorAll('link[href^="/"]').forEach(function(link) {
        var newHref = toAssetPath(link.getAttribute('href'));
        if (newHref) link.setAttribute('href', newHref);
      });

      document.querySelectorAll('script[src^="/"]').forEach(function(script) {
        var newSrc = toAssetPath(script.getAttribute('src'));
        if (newSrc && script.getAttribute('src') !== newSrc) {
          script.setAttribute('src', newSrc);
        }
      });

      document.querySelectorAll('img[src^="/"]').forEach(function(img) {
        var newSrc = toAssetPath(img.getAttribute('src'));
        if (newSrc) img.setAttribute('src', newSrc);
      });

      document.querySelectorAll('a[href^="/"]').forEach(function(anchor) {
        var newHref = toPagePath(anchor.getAttribute('href'));
        if (newHref) anchor.setAttribute('href', newHref);
      });

      document.querySelectorAll('iframe[src^="/"]').forEach(function(frame) {
        var newSrc = toPagePath(frame.getAttribute('src'));
        if (newSrc) frame.setAttribute('src', newSrc);
      });
    })();
  </script>
  <script defer src="{{ '/assets/consent.js' | relative_url }}"></script>
  <script defer src="{{ '/assets/js/theme-toggle.js' | relative_url }}"></script>
  <script defer src="{{ '/assets/js/navigation.js' | relative_url }}"></script>
  <script defer src="{{ '/assets/js/main.js' | relative_url }}"></script>
  {% if page.custom_js %}
    {% for script in page.custom_js %}
  <script defer src="{{ script | relative_url }}"></script>
    {% endfor %}
  {% endif %}
</body>
</html>
